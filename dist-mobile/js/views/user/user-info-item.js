define(["jquery","underscore","backbone","modelBinder","text!templates/user/address.html"],function(e,t,n,r,i){var s=Backbone.View.extend({initialize:function(){this.binder=new r,this.template=t.template(i)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.binder.bind(this.model,this.el),this.type=this.model.get("type"),this.type==="S"?this.$(".bldBox1").html("<br>"):this.type==="B"&&this.$(".address-type").html("Billing address is the same as Shipping address"),this},events:{"change input[name=sameAs]#top":"priorInfoPopulate","change input[name=sameAs]#bottom":"toggleCheckbox"},toggleCheckbox:function(e,t){var n=this.$("#bottom").attr("checked");this.$("#top").attr("checked",n==="checked"?!0:!1),this.priorInfoPopulate()},priorInfoPopulate:function(t,n){var r=null;this.$(".same-as").attr("checked")!="checked"?(this.model.validate=function(){},this.model.clear(),this.model.set("type",this.type)):(r=app.userInfoList.where({type:"S"})[0],e.extend(this.model.attributes,r.attributes),this.model.set("sameAs",!0),this.model.set("type","B"),this.binder.bind(this.model,this.el)),this.toggleInputs(this.model.get("sameAs"))},populateFromModel:function(t){e.extend(this.model.attributes,t.attributes),this.model.set("type","S"),this.binder.bind(this.model,this.el)},toggleInputs:function(t){var n=this.$(":input");this.$(":input").each(function(n,r){if(e(r).attr("class")=="same-as")return;t==1?e(r).attr("disabled","disabled"):e(r).removeAttr("disabled")})},isValid:function(){return this.model.validation.password.required=!1,this.model.validation.password2.required=!1,this.model.validation.password2.equalTo="",Backbone.Validation.bind(this,{valid:app.utils.valid,invalid:app.utils.invalid,forceUpdate:!0}),this.model.validate(),this.model.isValid()}});return s});